# CS4824-ECE4424-Final-Project
---
# Introduction
Every student on campus has at some point or another boarded the BT Transport bus only to find that its completely packed, despite the app saying otherwise. Bus drivers in the current system are required to manually keep track of current passengers, but this system is primitive and flawed. Human error can lead to invalid and incorrect data which brings harm to not only the BT system, but also the passengers who ride and utilize their services. In order to solve this problem, our team has recreated the results from the paper "Estimating Bus Cross-Sectional Flow Based on Machine Learning Algorithm Combined with Wi-Fi Probe Technology" [1] generated by utilizing machine learning to analyze wifi data in order to estimate the current number of passengers on a bus.

# Summary of the Original Paper
The original paper "Estimating Bus Cross-Sectional Flow Based on Machine Learning Algorithm Combined with Wi-Fi Probe Technology" by Ting-Zhao Chen, Yan-Yan Chen, and Jian-Hui Lai sought to create a machine algorithm that would estimate the amount of passengers inside a bus based on device wifi signals. This was done by placing 6 probes around the bus and estimating data received to predict bus capacity. However, a large portion of the paper primarily focused on determining which machine learning algorithm had the greatest accuracy. The team tested Random Forest, K-Nearest Neighbor, and Support Vector Machine. Each algorithm was fed the same feature vector: RRSI_AVG, RSSI_SUM, RSSI_ST, C_T, and M_AVG. These features are the average signal strength, the total sum of the signal strength, the standard deviation of the signal pool, the amount of times each signal was detected, and the average number of signals detected. The data was collected and converted into aforementioned vector by placing their 6 devices into a public bus and labelling the data manually by counting each passenger. This data was then fed into all 3 algorithms. The paper determined that Random Forest was the most accurate algorithm for the bus capacity problem. Additionally, they found that specifically for KNN, a K value of 8 was the most accurate.

# Our Method
The purpose of our project was to replicate the experiment conducted by the paper. However various changes were made to their methods. Additioanlly all software and hardware was proprietarily developed aside from the esp-32 we used. First we instead analyzed and collected bluetooth signals over wifi. This was because our device with our developed system, probing wifi was not possible. We believed analyzing bluetooth was acceptable as bluetooth signals would behave similarly to wifi. These signals were collected every 2 seconds and then the data was converted into bundles of 20 second intervals. This was because the component vector used by the paper analyzed in batches of times. Additionally, we changed the feature vector to instead break down C_T into 4 separate values. Each C_T would record how many devices were found for a certain length of time. The first covering 0-5 seconds, the second covering 5-10 seconds, 10-15 seconds, and the last considered any duration of over 15 seconds. All other components were kept as close as possible to the paper. It is also important to note that our experiment contained only one esp-32 as one was sufficient to cover a radius of the car and outsie of the car. The actual collection of the data was done by taking the esp-32 into a private car and driving a route similar to a bus. We varied the number of passengers in the vehicle and drove to densly populated areas. This data was then fed into 3 algorithms: KNN, RF, and SVM similarly to the paper. We then analyzed these results and compared them to the original paper.

# Data Analysis
After feeding our converted data from the esp-32 into Random Forest, K-Nearest Neighbor (We cross validated KNN), and Support Vector Machines, we found very similar results to the paper. Our implementation of these algorithms also had Random Forest having the lowest error rate. Our model had a 10% error rate. As for SVM and KNN, our implementation found an error rate of 20% for both. However, our KNN did not have the same predicted best K value in a sense. Our data found that a K value of 5 or higher had an extremely high accuracy among our data. We believe that this is due to our relatively small sample size. Due to different limitations and schedule misalignment, we were only able to collect about 20 minutes of driving data. We believed this was enough at the time as our system pinged hundres of times per minute and would result in a relatively small data set, but very dense. It is also important to note that this could have been due to our cross-validation system for KNN. Additionally, other factors of our experiment differed from the paper's. As mentioned before we based our system off of bluetooth signals while the original paper parsed both bluetooth and wifi signals. This change was due to the hardware limitations of our esp-32. Additionally, we only used one esp-32. However, this was because we only needed one to cover the area of the vehicle we collected our data in. Finally, our component vector was slightly different from the paper's. The paper's description of their feature vector was slightly vague specifically about what C_T was. We interpreted it as the amount of time a certain mac address was detected in our system over the course of each 20 second block. We decided to further break this data point down to 4 different C_T which kept track of the number of devices detected for certain lengths of time. The first C_T keeping track of devices detected for 0-5 seconds, the second detecting 5019 seconds, and the fourth detecting any over 15 seconds. We believed that this made the most sense in the context of the data and also could help our data be more accurate than the paper's.

# Results
As mentioned in Data Analysis, our implementation showed very similar results to the paper's.

# Conclusion
Overall, our implementation was a successful recreation of the paper.
